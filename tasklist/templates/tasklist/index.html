{% extends "base.html" %}


{% block title %}Task list{% endblock%}


{% block content %}

	<h1>Task list</h1>

	<table border='1'>

		{% for item in item_list %}
		<tr>
			<td>{{item.title}}</td>
			<td>{{item.start_date}}</td>
			<td>{{item.end_date}}</td>
			
			<td><input type="checkbox" id="completed_{{ item.id }}" {% if item.completed %}checked{% endif %} onclick="toggle_completed({{ item.id }})"></td>
			
		</tr>
		{% endfor %}

	</table>
	
<script>

	function toggle_completed(id) {
		$.post("{% url 'tasks:toggle_completed' %}", {id: id}, process_toggle_completed);
	}
	
	function process_toggle_completed(data) {
		console.log(data);
	}

</script>
{% endblock %}
